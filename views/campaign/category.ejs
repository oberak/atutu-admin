
<!DOCTYPE html>
<html lang="en">
    <head>
      <% include ../partial/head %>
        <title>ATUTU Admin</title>
    </head>
    <body>

  <!--  <div class="rw-btn rw-btn-nav" data-action="aside-hide"><span></span></div>-->
        <!-- PAGE WRAPPER -->
        <div class="page page--w-header">
          <% include ../partial/header %>
            <!-- PAGE CONTENT WRAPPER -->
            <div class="page__content page__content--w-aside-fixed" id="page-content">

                <!-- PAGE ASIDE PANEL -->
                <div class="page-aside invert" id="page-aside">
                    <div class="scroll" style="max-height: 100%">
                    <div class="navigation" id="navigation-default">

                        <div class="user user--bordered user--lg user--w-lineunder user--controls">
                            <img src="http://via.placeholder.com/128x128">
                            <div class="user__name">
                                <strong>Dmitry Ivaniuk</strong><br>
                                <span class="text-muted">Administrator</span>

                                <div class="user__controls">
                                    <div class="dropdown">
                                        <button class="btn btn-light btn-sm btn-icon" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-cog"></span></button>
                                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Profile</a>
                                            <a class="dropdown-item" href="#">Projects</a>
                                            <a class="dropdown-item" href="#">Invoices</a>
                                            <a class="dropdown-item" href="#">Settings</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Log out</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="user__lineunder">
                                <div class="text">
                                    Last visit 15min ago
                                </div>
                                <div class="buttons">
                                    <div class="dropdown">
                                        <button class="button button-settings" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Profile</a>
                                            <a class="dropdown-item" href="#">Projects</a>
                                            <a class="dropdown-item" href="#">Invoices</a>
                                            <a class="dropdown-item" href="#">Settings</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Log out</a>
                                        </div>
                                    </div>
                                    <div class="button button-minimize" data-action="aside-minimize" data-toggle="tooltip" data-placement="top" data-original-title="Minimize navigation"></div>
                                </div>
                            </div>
                        </div>

                            <ul>
                                <li class="title">Main</li>
                                <li>
                                    <a href="index.html">
                                        <span class="icon li-home"></span>
                                        <span class="text">Home</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Management Campaign</span>
                                    </a>
                                    <ul>
                                        <li>
                                            <a href="pages-user-contacts.html" class="no-icon">
                                                <span class="text">Campaign List</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="pages-user-profile.html" class="no-icon">
                                                <span class="text">Campaign Report List</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Point</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Hot Event</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Charities</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Categories</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Users</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Mail</span>
                                    </a>
                                </li>
                            </ul>
                    </div>
                    </div>
                </div>
                <!-- //END PAGE ASIDE PANEL -->



                <!-- PAGE CONTENT CONTAINER -->
                <div class="content" id="content">

                    <!-- PAGE HEADING -->
                    <div class="page-heading">
                        <div class="page-heading__container">
                            <div class="icon">
                                <span class="li-menu-square"></span>
                            </div>
                            <h1 class="title">Default tables</h1>
                            <p class="caption">The Right Way - Admin Template</p>
                        </div>

                        <nav aria-label="breadcrumb" role="navigation">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                                <li class="breadcrumb-item"><a href="#">Components</a></li>
                                <li class="breadcrumb-item"><a href="#">Tables</a></li>
                                <li class="breadcrumb-item active">Default tables</li>
                            </ol>
                        </nav>
                    </div>
                    <!-- //END PAGE HEADING -->
                    <div class="container-fluid">


                        <div class="card">
                            <div class="card-container">
                            </div>
                            <div class="card-body">

                                <h4 id="rw-tb-default">Management Categories</h4>
                                <div class="body table-responsive">
                                    <table class="table table-striped table-hover" style="cursor: pointer;">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Myanmar Name</th>
                                                <th>English Name</th>
                                                <th>Campaign</th>
                                                <th>Hot Event</th>
                                                <th>Charities</th>
                                                <th colspan="2">Function</th>
                                            </tr>
                                        </thead>
                                        <tbody id="dTable">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- //END PAGE CONTENT CONTAINER -->

            </div>
            <!-- //END PAGE CONTENT -->

        </div>
        <!-- //END PAGE WRAPPER -->

        <!-- Large Size -->

              <div class="modal fade" id="modify">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header" style="background-color:lightblue">
                        <h5 class="modal-title" id="exampleModalLabel">Modify Category</h5>
                    </div>
                    <input type="hidden" name="catid" id="catid" value="">
                    <div class="modal-body" style="height:150px;">
                      <table >
                        <thead>
                          <tr>
                            <th>Myanmar Name</th>
                            <th>English Name</th>
                            <th>Campaign</th>
                            <th>Hot Event</th>
                            <th>Charities</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td><input type="text" name="myanmar" id="myanmarname" value=""></td>
                            <td><input type="text" name="english" id="englishname" value=""></td>
                            <td><input type="checkbox" name="camp" id="campaign" value=""></td>
                            <td><input type="checkbox" name="hote" id="hotevent" value=""></td>
                            <td><input type="checkbox" name="volun" id="volunteer" value=""></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="modal-footer" style="background-color:lightblue">
                        <button type="button" class="btn btn-light" data-dismiss="modal">CANCEL</button>
                        <button type="button" id="btnSave" class="btn btn-primary">SAVE</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="Add">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header" style="background-color:lightblue">
                  <h5 class="modal-title" id="exampleModalLabel">Add Category</h5>
              </div>
              <div class="modal-body" style="height:150px;">
                <table>
                  <thead>
                    <tr>
                      <th>Myanmar Name</th>
                      <th>English Name</th>
                      <th>Campaign</th>
                      <th>Hot Event</th>
                      <th>Charities</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><input type="text" name="" id="myanmarname1" value=""></td>
                      <td><input type="text" name="" id="englishname1" value=""></td>
                      <td><input type="checkbox" name="" id="campaign1" value=""></td>
                      <td><input type="checkbox" name="" id="hotevent1" value=""></td>
                      <td><input type="checkbox" name="" id="volunteer1" value=""></td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="modal-footer" style="background-color:lightblue">
                  <button type="button" class="btn btn-light" data-dismiss="modal">CANCEL</button>
                  <button type="button" id="btnAdd" class="btn btn-primary">ADD</button>
              </div>
          </div>
      </div>
  </div>

  <div class="modal fade" id="Delete">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header" style="background-color:lightblue">
            <h5 class="modal-title" id="exampleModalLabel">Delete Category</h5>
        </div>
        <input type="hidden" name="catid" id="catid" value="">
        <div class="modal-body" style="height:150px;">
          <table>
            <thead>
              <tr>
                <th>Myanmar Name</th>
                <th>English Name</th>
                <th>Campaign</th>
                <th>Hot Event</th>
                <th>Charities</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><input type="text" name="" id="myanmarname2" value=""></td>
                <td><input type="text" name="" id="englishname2" value=""></td>
                <td><input type="checkbox" name="" id="campaign2" value=""></td>
                <td><input type="checkbox" name="" id="hotevent2" value=""></td>
                <td><input type="checkbox" name="" id="volunteer2" value=""></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer" style="background-color:lightblue">
            <button type="button" id="btnDelete" class="btn btn-primary">DELETE</button>
        </div>
    </div>
</div>
</div>

        <% include ../partial/script %>
        <!-- Demo Js -->
        <script src="/js/demo.js"></script>
        <script type="text/javascript">
          $(function () {
            // select list on load
            $.ajax({
              method: "POST",
              url: "/category",
              data: {name: "Jhon", location: "Boston"}
            }).done(function( rtn ){
              var dTable = document.getElementById('dTable');
              for(var i=1; i<= rtn.categories.length; i++){
                var row = dTable.insertRow(dTable.rows.length);
                var cell0 = row.insertCell(0);
                cell0.appendChild(document.createTextNode(i));
                var cell1 = row.insertCell(1);
                cell1.appendChild(document.createTextNode(rtn.categories[i-1].name.my));
                var cell2 = row.insertCell(2);
                cell2.appendChild(document.createTextNode(rtn.categories[i-1].name.en));
                var cell3 = row.insertCell(3);
                cell3.appendChild(document.createTextNode(rtn.categories[i-1].contact.c));
                var cell4 = row.insertCell(4);
                cell4.appendChild(document.createTextNode(rtn.categories[i-1].contact.e));
                var cell5 = row.insertCell(5);
                cell5.appendChild(document.createTextNode(rtn.categories[i-1].contact.v));
                var cell6 = row.insertCell(6);
                var btnModify = document.createElement("input");
                btnModify.type = "button";
                btnModify.value = "Modify";
                cell6.appendChild(btnModify);
                btnModify.setAttribute('data-row-key', rtn.categories[i-1]._id);
                btnModify.onclick = function(){
                  view($(this).attr('data-row-key'));
                }
                var cell7 = row.insertCell(7);
                var btnDelete = document.createElement("input");
                btnDelete.type = "button";
                btnDelete.value = "Delete";
                cell7.appendChild(btnDelete);
                btnDelete.setAttribute('data-row-key', rtn.categories[i-1]._id);
                btnDelete.onclick = function(){
                  dele($(this).attr('data-row-key'));
                }
                if( i == rtn.categories.length){
                  var cell8 = row.insertCell(8);
                  var btnAdd = document.createElement("span");
                  btnAdd.setAttribute("class","fa fa-plus-circle");
                  btnAdd.setAttribute("style","font-size: 45px;");
                  cell8.appendChild(btnAdd);
                  //btnAdd.setAttribute('data-row-key', rtn.categories[i-1]._id);
                  btnAdd.onclick = function(){
                    add($(this).attr('data-row-key'));
                  }
                }
              }
            }).fail(function(err){
              console.log('ERROR',err);
            }); // end of select list

            // modify view
            function view(id){
              $modal = $("#modify");
              $modal.modal('show');
              $.ajax({
                method: "POST",
                url: "/view/"+id
              }).done(function( rtn ){

                var categories = rtn.categories;
                console.log(categories._id);
                document.getElementById('myanmarname').value = categories.name.my;
                document.getElementById('englishname').value = categories.name.en;
                document.getElementById("campaign").checked = categories.contact.c;
                document.getElementById("hotevent").checked = categories.contact.e;
                document.getElementById("volunteer").checked = categories.contact.v;
                document.getElementById("catid").value = categories._id;
            }).fail(function(err){
              console.log('ERROR', err);
            });
          } // end of modify view

            // modify save button event
            btnSave.onclick = function(){
              var name1 = document.getElementById('myanmarname').value;
              var name2 = document.getElementById('englishname').value;
              var contact1 = document.getElementById('campaign').checked;
              var contact2 = document.getElementById('hotevent').checked;
              var contact3 = document.getElementById('volunteer').checked;
              var catid = document.getElementById('catid').value;
              $.ajax({
                method: "POST",
                url: "/category/modify",
                data:{'myanmarname':name1, 'englishname':name2, 'campaign':contact1, 'hotevent':contact2, 'volunteer':contact3, 'catid': catid},
                success: function (resultData) {
                    location.href = '/category';
                },
              }).done(function(rtn){
                console.log(rtn);
              }).fail(function(err){
                console.log('ERROR', err);
              });
            }// end of modify save button event

            //Add view
            function add(id){
              $modal = $("#Add");
              $modal.modal('show');
              $.ajax({
                method: "POST",
                url: "/add/"+id
              }).done(function( rtn ){
                var categories = rtn.categories;
                console.log(categories._id);
                document.getElementById('myanmarname1').value = categories.name.my;
                document.getElementById('englishname1').value = categories.name.en;
                document.getElementById("campaign1").checked = categories.contact.c;
                document.getElementById("hotevent1").checked = categories.contact.e;
                document.getElementById("volunteer1").checked = categories.contact.v;
            }).fail(function(err){
              console.log('ERROR', err);
            });
          }
          // end of add view

          // Add button save event
          btnAdd.onclick = function(){
            var name1 = document.getElementById('myanmarname1').value;
            var name2 = document.getElementById('englishname1').value;
            var contact1 = document.getElementById('campaign1').checked;
            var contact2 = document.getElementById('hotevent1').checked;
            var contact3 = document.getElementById('volunteer1').checked;
            $.ajax({
              method: "POST",
              url: "/category/add",
              data:{'myanmarname':name1, 'englishname':name2, 'campaign':contact1, 'hotevent':contact2, 'volunteer':contact3},
              success: function (resultData) {
                  location.href = '/category';
              },
            }).done(function(rtn){
              console.log(rtn);
            }).fail(function(err){
              console.log('ERROR', err);
            });
          }
           // end of Add button save event

           // delete view
           function dele(id){
             $modal = $("#Delete");
             $modal.modal('show');
             $.ajax({
               method: "POST",
               url: "/dele/"+id
             }).done(function( rtn ){
               var categories = rtn.categories;
               console.log(categories._id);
               document.getElementById('myanmarname2').value = categories.name.my;
               document.getElementById('englishname2').value = categories.name.en;
               document.getElementById("campaign2").checked = categories.contact.c;
               document.getElementById("hotevent2").checked = categories.contact.e;
               document.getElementById("volunteer2").checked = categories.contact.v;
               document.getElementById("catid").value = categories._id;
           }).fail(function(err){
             console.log('ERROR', err);
           });
         }
         // end of delete view

         // Delete button save event
         btnDelete.onclick = function(){
           var name1 = document.getElementById('myanmarname2').value;
           var name2 = document.getElementById('englishname2').value;
           var contact1 = document.getElementById('campaign2').checked;
           var contact2 = document.getElementById('hotevent2').checked;
           var contact3 = document.getElementById('volunteer2').checked;
           var catid = document.getElementById('catid').value;
           $.ajax({
             method: "POST",
             url: "/category/dele",
             data:{'myanmarname':name1, 'englishname':name2, 'campaign':contact1, 'hotevent':contact2, 'volunteer':contact3, 'catid': catid},
             success: function (resultData) {
                 location.href = '/category';
             },
           }).done(function(rtn){
             console.log(rtn);
           }).fail(function(err){
             console.log('ERROR', err);
           });
         }
          // end of Delete button save event

          });
          function detail(id){
            location.href = '/view/'+id;
          }


        </script>
    </body>
</html>
