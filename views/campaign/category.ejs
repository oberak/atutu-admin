
<!DOCTYPE html>
<html lang="en">
    <head>
      <% include ../partial/head %>
        <title>ATUTU Admin</title>
    </head>
    <body>

        <!-- PAGE WRAPPER -->
        <div class="page page--w-header">
          <% include ../partial/header %>
            <!-- PAGE CONTENT WRAPPER -->
            <div class="page__content page__content--w-aside-fixed" id="page-content">

                <!-- PAGE ASIDE PANEL -->
                <div class="page-aside invert" id="page-aside">
                    <div class="scroll" style="max-height: 100%">
                    <div class="navigation" id="navigation-default">

                        <div class="user user--bordered user--lg user--w-lineunder user--controls">
                            <img src="http://via.placeholder.com/128x128">
                            <div class="user__name">
                                <strong>Dmitry Ivaniuk</strong><br>
                                <span class="text-muted">Administrator</span>

                                <div class="user__controls">
                                    <div class="dropdown">
                                        <button class="btn btn-light btn-sm btn-icon" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-cog"></span></button>
                                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Profile</a>
                                            <a class="dropdown-item" href="#">Projects</a>
                                            <a class="dropdown-item" href="#">Invoices</a>
                                            <a class="dropdown-item" href="#">Settings</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Log out</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="user__lineunder">
                                <div class="text">
                                    Last visit 15min ago
                                </div>
                                <div class="buttons">
                                    <div class="dropdown">
                                        <button class="button button-settings" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Profile</a>
                                            <a class="dropdown-item" href="#">Projects</a>
                                            <a class="dropdown-item" href="#">Invoices</a>
                                            <a class="dropdown-item" href="#">Settings</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Log out</a>
                                        </div>
                                    </div>
                                    <div class="button button-minimize" data-action="aside-minimize" data-toggle="tooltip" data-placement="top" data-original-title="Minimize navigation"></div>
                                </div>
                            </div>
                        </div>

                            <ul>
                                <li class="title">Main</li>
                                <li>
                                    <a href="index.html">
                                        <span class="icon li-home"></span>
                                        <span class="text">Home</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Management Campaign</span>
                                    </a>
                                    <ul>
                                        <li>
                                            <a href="pages-user-contacts.html" class="no-icon">
                                                <span class="text">Campaign List</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="pages-user-profile.html" class="no-icon">
                                                <span class="text">Campaign Report List</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Point</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Hot Event</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Charities</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Categories</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Manage Users</span>
                                    </a>
                                </li>

                                <li class="openable">
                                    <a href="#">
                                        <span class="icon li-document"></span>
                                        <span class="text">Mail</span>
                                    </a>
                                </li>
                            </ul>
                    </div>
                    </div>
                </div>
                <!-- //END PAGE ASIDE PANEL -->



                <!-- PAGE CONTENT CONTAINER -->
                <div class="content" id="content">

                    <!-- PAGE HEADING -->
                    <div class="page-heading">
                        <div class="page-heading__container">
                            <div class="icon">
                                <span class="li-menu-square" id="btnSearch"></span>
                            </div>
                            <h1 class="title">Default tables</h1>
                            <p class="caption">The Right Way - Admin Template</p>
                        </div>

                        <nav aria-label="breadcrumb" role="navigation">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                                <li class="breadcrumb-item"><a href="#">Components</a></li>
                                <li class="breadcrumb-item"><a href="#">Tables</a></li>
                                <li class="breadcrumb-item active">Default tables</li>
                            </ol>
                        </nav>
                    </div>
                    <!-- //END PAGE HEADING -->

                    <div class="container-fluid">


                        <div class="card">
                            <div class="card-container">
                              <div class="box">
                                  <form class="page-header-search" id="header_search">
                                  <input type="text" class="form-control" placeholder="Type in to search">
                                  <div class="page-header-search__icon"></div>
                                </form>
                              </div>
                            </div>
                            <div class="card-body">

                                <h4 id="rw-tb-default">Management Categories</h4>
                                <div class="body table-responsive">
                                    <table class="table table-striped table-hover" style="cursor: pointer;">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th onclick="sort('name')" colspan="2">Name</th>
                                                <th onclick="sort('use')" colspan="3">Content</th>
                                            </tr>
                                        </thead>
                                        <tbody id="dTable">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- //END PAGE CONTENT CONTAINER -->

            </div>
            <!-- //END PAGE CONTENT -->

        </div>
        <!-- //END PAGE WRAPPER -->

        <!-- Large Size -->
              <div class="modal fade" id="modal">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header" style="background-color:lightblue">
                        <h5 class="modal-title" id="exampleModalLabel">Modify Category</h5>
                    </div>
                    <div class="modal-body" style="height:150px;">
                      <table>
                        <thead>
                          <tr>
                            <th colspan="2">Name</th>
                            <th colspan="3">Content</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td><input type="text" name="" id="myanmarname" value=""</td>
                            <td><input type="text" name="" id="englishname" value=""</td>
                            <td><input type="text" name="" id="campaign" value=""</td>
                            <td><input type="text" name="" id="hotevent" value=""</td>
                            <td><input type="text" name="" id="volunteer" value=""</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="modal-footer" style="background-color:lightblue">
                        <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <% include ../partial/script %>
        <!-- Demo Js -->
        <script src="/js/demo.js"></script>
        <script type="text/javascript">
          $(function () {
              $modal = $("#modal");
            btnSearch.onclick = function(){
              $.ajax({
                method: "POST",
                url: "/category",
                data: {name: "Jhon", location: "Boston"}
              }).done(function( rtn ){
                var dTable = document.getElementById('dTable');
                for(var i=0; i< rtn.users.length; i++){
                  var row = dTable.insertRow(dTable.rows.length);
                  var cell0 = row.insertCell(0);
                  cell0.appendChild(document.createTextNode(i+1));
                  var cell1 = row.insertCell(1);
                  cell1.appendChild(document.createTextNode(rtn.users[i].name.my));
                  var cell2 = row.insertCell(2);
                  cell2.appendChild(document.createTextNode(rtn.users[i].name.en));
                  var cell3 = row.insertCell(3);
                  cell3.appendChild(document.createTextNode(rtn.users[i].use.c));
                  var cell4 = row.insertCell(4);
                  cell4.appendChild(document.createTextNode(rtn.users[i].use.e));
                  var cell5 = row.insertCell(5);
                  cell5.appendChild(document.createTextNode(rtn.users[i].use.v));
                  row.setAttribute('data-row-key', rtn.users[i]._id);
                  row.onclick = function(e){
                    view($(this).attr('data-row-key'));
                  }
                }
              }).fail(function(err){
                console.log('ERROR',err);
              });
            }
            function view(id){
              $modal.modal('show');
              $.ajax({
                method: "POST",
                url: "/view/"+id
              }).done(function( rtn ){
                console.log(rtn);
                var user = rtn.user;
                document.getElementById('myanmarname').value = user.name.my;
                document.getElementById('englishname').value = user.name.en;
                document.getElementById('campaign').value = user.use.c;
                document.getElementById('hotevent').value = user.use.e;
                document.getElementById('volunteer').value = user.use.v;
            }).fail(function(err){
              console.log('ERROR', err);
            });
          }
          });
          function detail(id){
            location.href = '/view/'+id;
          }
        </script>
    </body>
</html>
